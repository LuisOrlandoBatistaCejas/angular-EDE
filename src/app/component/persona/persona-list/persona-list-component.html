<div class="p-l-r-20">
  <div fxLayout="row wrap"  fxLayout.xs="column">
    <div fxFlex="50" fxFlex.xs="100">
      <h4>Personas</h4>
    </div>
    <div fxFlex="50" fxFlex.xs="100" fxLayoutAlign="end center">
      <button (click)="openDialogCreate()" mat-raised-button color="primary">Adicionar</button>
    </div>

  </div>
  <mat-table [dataSource]="personaList" *ngIf="!loading">

    <ng-container cdkColumnDef="tipoIdentificacion">
      <mat-header-cell *cdkHeaderCellDef>Tipo de Identificación</mat-header-cell>
      <mat-cell *cdkCellDef="let row"> {{row.tipoIdentificacion?.Tipo}}</mat-cell>
    </ng-container>

    <ng-container cdkColumnDef="identificacion">
      <mat-header-cell *cdkHeaderCellDef> Identificacion</mat-header-cell>
      <mat-cell *cdkCellDef="let row"> {{row.Identificacion}}</mat-cell>
    </ng-container>

    <ng-container cdkColumnDef="razonSocial">
      <mat-header-cell *cdkHeaderCellDef> Razón Social</mat-header-cell>
      <mat-cell *cdkCellDef="let row"> {{row.RazonSocial}}</mat-cell>
    </ng-container>

    <ng-container cdkColumnDef="nombreComercial">
      <mat-header-cell *cdkHeaderCellDef> Teléfono</mat-header-cell>
      <mat-cell *cdkCellDef="let row"> {{row.Telefonos}}</mat-cell>
    </ng-container>

    <ng-container cdkColumnDef="email">
      <mat-header-cell *cdkHeaderCellDef> Email</mat-header-cell>
      <mat-cell *cdkCellDef="let row"> {{row.Email}}</mat-cell>
    </ng-container>

    <ng-container cdkColumnDef="formaCancelacion">
      <mat-header-cell *cdkHeaderCellDef> Forma de Cancelación</mat-header-cell>
      <mat-cell *cdkCellDef="let row"> {{row.formaCancelacion?.Nombre}}</mat-cell>
    </ng-container>

    <ng-container cdkColumnDef="vehiculos">
      <mat-header-cell *cdkHeaderCellDef> Vehículos</mat-header-cell>
      <mat-cell *cdkCellDef="let row">
        <span class="text-accent" style="cursor: pointer" matTooltip="Ver Vehículos"
              (click)="openPersonaVehiculosDialog(row.Vehiculos)">
          {{row.Vehiculos.length}}
        </span>
      </mat-cell>
    </ng-container>

    <ng-container cdkColumnDef="acciones">
      <mat-header-cell *cdkHeaderCellDef> Acciones</mat-header-cell>
      <mat-cell *cdkCellDef="let row">
        <div fxLayout="row" class="action-column">
          <mat-icon matTooltip="Actualizar" color="accent" (click)="openDialogEdit(row)">edit</mat-icon>
          <mat-icon matTooltip="Eliminar" color="warn" (click)="delete(row)">delete</mat-icon>

        </div>
      </mat-cell>
    </ng-container>



    <mat-header-row *cdkHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *cdkRowDef="let row; columns: displayedColumns"></mat-row>
  </mat-table>

  <div *ngIf="loading" class="m-t-10-p" fxLayoutAlign="center center">
    <mat-spinner strokeWidth="3" [diameter]="50"></mat-spinner>
  </div>

</div>
